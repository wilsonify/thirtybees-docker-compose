/**
 * plugin.js
 *
 * Copyright, Alberto Peripolli
 * Released under Creative Commons Attribution-NonCommercial 3.0 Unported License.
 *
 * Contributing: https://github.com/trippo/ResponsiveFilemanager
 */
tinymce.PluginManager.add("filemanager",function(e){return tinymce.activeEditor.settings.file_browser_callback=function a(n,t,i,s){let r=e.settings.external_filemanager_path.replace(/\/\/filemanager/,"/filemanager"),g=new URL(r+"dialog.php");g.searchParams.append("lang",e.settings.language),"image"===i?g.searchParams.append("type",1):"media"===i?g.searchParams.append("type",3):g.searchParams.append("type",2);let l="File Manager";void 0!==e.settings.filemanager_title&&e.settings.filemanager_title&&(l=e.settings.filemanager_title),g.searchParams.append("title",l),void 0!==e.settings.filemanager_sort_by&&e.settings.filemanager_sort_by&&g.searchParams.append("sort_by",e.settings.filemanager_sort_by),void 0!==e.settings.filemanager_descending&&e.settings.filemanager_descending&&g.searchParams.append("descending",e.settings.filemanager_descending),tinymce.activeEditor.windowManager.open({title:l,file:g.href,width:860,height:570,resizable:!0,maximizable:!0,inline:1},{setUrl:function(a){var t=s.document.getElementById(n);if(t.value=e.convertURL(a),"fireEvent"in t)t.fireEvent("onchange");else{var i=document.createEvent("HTMLEvents");i.initEvent("change",!1,!0),t.dispatchEvent(i)}}})},!1});